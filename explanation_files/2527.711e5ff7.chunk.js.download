/*! For license information please see 2527.711e5ff7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[2527],{47731:(e,t,n)=>{n.d(t,{A:()=>a});var r,o=n(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const a=function(e){return o.createElement("svg",i({width:19,height:19,className:"svgIcon-use",viewBox:"0 0 19 19"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M7.6 5.138 12.03 9.5 7.6 13.862l-.554-.554L10.854 9.5 7.046 5.692"})))}},52752:(e,t,n)=>{n.d(t,{A:()=>a});var r,o=n(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const a=function(e){return o.createElement("svg",i({width:25,height:25,className:"svgIcon-use"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M5 12.5q0 .828.586 1.414.585.585 1.414.586.828 0 1.414-.586.585-.586.586-1.414 0-.828-.586-1.414A1.93 1.93 0 0 0 7 10.5q-.828 0-1.414.586-.585.586-.586 1.414m5.617 0q0 .828.586 1.414.587.585 1.414.586.828 0 1.414-.586t.586-1.414-.586-1.414a1.93 1.93 0 0 0-1.414-.586q-.827 0-1.414.586-.586.586-.586 1.414m5.6 0q0 .828.586 1.414.585.585 1.432.586.827 0 1.413-.586t.587-1.414q0-.828-.587-1.414a1.93 1.93 0 0 0-1.413-.586q-.847 0-1.432.586t-.587 1.414z"})))}},17180:(e,t,n)=>{n.d(t,{El:()=>i,Ox:()=>r,_5:()=>o});var r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},o=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))},i=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"NOT_FOUND"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},8389:(e,t,n)=>{var r;n.d(t,{J:()=>r}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(r||(r={}))},52798:(e,t,n)=>{n.d(t,{I:()=>u});var r,o=n(96540),i=n(86527),a=n(5600),l=n(44402);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const c=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,viewBox:"0 0 25 25"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z",clipRule:"evenodd"})))};var u=function(){var e=(0,l.l)();return o.createElement(a.G,{tooltipText:"View community guidelines"},o.createElement(i.N,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},o.createElement(c,null)))}},3737:(e,t,n)=>{n.d(t,{L:()=>K});var r=n(45458),o=n(80296),i=n(96540),a=n(82487),l=n(43389),s=n(92554),c=n(52290),u=n(58262),d=n(21771),p=n(84676),m=n(96009),f=n(64467),v=n(73711),h=n(86527),y=n(36557),g=n(44402),E=n(42976),b=n(94644);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,f.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=250,O=5,w=function(e){return{marginLeft:"4px",color:e.colorTokens.foreground.neutral.secondary.base,":hover":{color:e.colorTokens.foreground.neutral.primary.hover}}};function T(e,t,n){return"char"===e&&t>x||"line"===e&&n>O}function S(e){var t=e.paragraphs,n=e.truncateStrategy,r=(0,g.l)(),a=0,l=0,s=(0,i.useState)(!1),u=(0,o.A)(s,2),d=u[0],p=u[1],m="none"!==n&&!d,f=(0,i.useCallback)((function(){p(!0)}),[p]);return i.createElement("pre",{className:r({whiteSpace:"pre-wrap"})},t.map((function(e){if(!d&&T(n,a,l))return null;var t=(null==e?void 0:e.text)||"";a+=t.length||0,l+=t.split("\n").length||0;var o=R(R({},e),{},{dropCapImage:null,hasDropCap:null}),s=!d&&T(n,a,l);if(s&&"char"===n){var u=x-(a-t.length||0);o.markups=o.markups.reduce((function(e,t){if(t.start<u){var n=R({},t);n.end>u&&(n.end=u),e.push(n)}return e}),[]),o.text=(0,b.Mc)(t,u)}return i.createElement(c.a,{padding:"5px 0px",key:e.name||e.id},i.createElement(y.kZ,{scale:"M",color:"DARKER",tag:"div"},i.createElement("div",{className:r({lineHeight:"24px"})},i.createElement(v.O,{paragraph:o,richTextStyle:"FULL_PAGE",paragraphStyle:E.FU.P}),m&&s&&i.createElement(i.Fragment,null,"line"===n&&"...",i.createElement(h.N,{onClick:f,rules:w,linkStyle:"OBVIOUS",inline:!0},"more")))))})).filter((function(e){return!!e})))}var I=n(57975),P=n(60602),D=n(51739),N=n(72130),C=n(49287),A=n(47731),j=n(81878),L=n(65550),_=n(79756);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,f.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){return{display:"flex",alignItems:"center",gap:"4px",marginRight:"8px",fill:e.colorTokens.foreground.neutral.secondary.base,":hover":{color:e.colorTokens.foreground.neutral.primary.hover,fill:e.colorTokens.foreground.neutral.primary.hover,"& p":{color:e.colorTokens.foreground.neutral.primary.hover}}}},F=function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")};function H(e){var t=e.label,n=e.onClick,r=e.children;return i.createElement(h.N,{linkStyle:"SUBTLE",rules:V,onClick:n},i.createElement(j.A,{"aria-label":"responses"}),i.createElement(y.kZ,{color:"LIGHTER",scale:"S"},t),r)}var U=function(e){var t=e.response,n=t.postResponses,r=t.id,o=(null==n?void 0:n.count)||0,a=(0,i.useContext)(P.a),s=a.inResponseToEntityId,u=a.inResponseToEntityTypename,d=a.isThreadedResponsesVisible,p=a.toggleThreadedResponses,m=a.threadDepthOnPage,f=a.toggleCreateReply,v=a.loadThreadedResponses,g=a.isThreadedResponsesQueryCalled,E=a.showContinueThisThreadSidebar,b=a.threadDepthFromRootEntity,k=(0,i.useContext)(l.o),R=k.rootEntityId,x=k.rootEntityTypename,O=(0,N.$L)(),w=(0,C.jI)(),T=m>=D.qg,S=T&&o>0,j=(0,L.L)(),M=B(B(B({postId:r},(0,_.rz)(s,u)),(0,_.DL)(R,x)),{},{threadDepth:b,source:w}),V=(0,i.useCallback)((function(){E(),O.event("response.continue",B({},M))}),[E,M]),U=(0,i.useCallback)((function(){d?O.event("response.collapsed",B({},M)):d||O.event("response.expanded",B({},M)),p()}),[p,d,M]),Z=(0,i.useCallback)((function(){T?V():(g||v(),f())}),[T,V,g,v,f]);return i.createElement(c.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},i.createElement(c.a,{display:"flex",alignItems:"center",gap:"16px"},i.createElement(I.W,{buttonStyle:"SUBTLE_MARGIN",buttonColor:"LIGHTER",countScale:"S",post:t,shouldShowResponsiveLabelText:!0,susiEntry:(0,_.gz)(u)}),S?i.createElement(H,{onClick:V,label:"More replies"},i.createElement(A.A,{height:"24",width:"24"})):o>0&&i.createElement(H,{onClick:U,label:F(o,d)}),!j&&!S&&i.createElement(y.kZ,{color:"DARKER",scale:"M"},i.createElement(h.N,{onClick:Z,linkStyle:"OBVIOUS",inline:!0},"Reply"))))},Z=n(8381),G=function(e){var t,n=e.simpleResponse,r=e.parentEntity,o=e.omitBottomBorder,a=n.creator,f=n.content,v=n.mediumUrl,h=(0,i.useRef)(null),y=(0,i.useContext)(l.o).sidebarRef;(0,u.n)(h,n,y);var g=null==f||null===(t=f.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(a&&f&&g&&v))return null;var E,b=(E=g.map((function(e){return e.text||""}))).join("").length>320?"char":E.join("\n").split("\n").length>O?"line":"none",k="none"!==b;return i.createElement(d.V,{post:n,presentationContext:"POST_PREVIEW",isFullPost:!k},i.createElement(c.a,{paddingTop:"25px",paddingBottom:"16px",borderBottom:o?void 0:"neutral.primary",ref:h},i.createElement(p.T,{response:n,responseType:Z.a.SIMPLE,parentEntity:r}),i.createElement(m.c,{inResponseToMediaResource:n.inResponseToMediaResource}),i.createElement(c.a,{marginTop:"5px",wordBreak:"break-word"},i.createElement(s.r.Provider,{value:!0},i.createElement(S,{paragraphs:g,truncateStrategy:b}))),i.createElement(U,{response:n})))},Q=n(78265),q=n(16022),z=n(15371),K=function(e){var t,n=e.responsePost,s=e.index,c=e.parentEntity,u=e.omitBottomBorder,d=(0,i.useState)(!1),p=(0,o.A)(d,2),m=p[0],f=p[1],v=(0,i.useState)(null),h=(0,o.A)(v,2),y=h[0],g=h[1],E=(0,i.useContext)(l.o),b=E.editingResponsesAtIndices,k=E.setEditingResponsesAtIndices;return(0,i.useEffect)((function(){if(m&&!b.includes(s)&&k([].concat((0,r.A)(b),[s])),!m&&b.includes(s)){var e=b.filter((function(e){return e!==s}));k(e)}}),[m,b,k]),n?m?i.createElement(a.o.Provider,{value:{isEditing:m,setIsEditing:f,latestRev:n.latestRev,createdAt:n.createdAt,setEditingQuote:g,editingQuote:y}},i.createElement(C.Ne,{source:{index:s},key:n.id,extendSource:!0},i.createElement(q.n,{type:Q.o.edit,parentEntityId:c.id,parentEntityTypename:c.__typename,responseId:n.id,initialValue:null===(t=n.content)||void 0===t?void 0:t.bodyModel,parentCreatorName:"Catalog"===c.__typename?c.creator.username:"",parentEntitySlug:"Catalog"===c.__typename?(0,z.KY)(c):""}))):i.createElement(a.o.Provider,{value:{isEditing:m,setIsEditing:f,setEditingQuote:g,editingQuote:y}},i.createElement(C.Ne,{source:{index:s},key:n.id,extendSource:!0},i.createElement(G,{parentEntity:c,simpleResponse:n,omitBottomBorder:u}))):null}},82487:(e,t,n)=>{n.d(t,{o:()=>r});var r=n(96540).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},84676:(e,t,n)=>{n.d(t,{T:()=>me});var r=n(96540),o=n(5072),i=n(70600),a=n(36469),l=n(88474),s=n(39),c=n(44402),u=function(e){var t=e.title,n=e.backgroundColor,o=e.color,i=void 0===o?"white":o,a=(0,c.l)(),l=(0,s.Z)({name:"detail",scale:"XS",color:"LIGHTER"});return r.createElement("div",{className:a([l,function(){return{color:i,backgroundColor:n,borderRadius:"4px",marginLeft:"4px",padding:"0 4px"}}])},t)},d=n(27721),p=n(23393),m=n(52290),f=n(86527),v=n(36557),h=n(49287),y=n(20239),g=n(80296),E=n(95420),b=n(69733),k=n(43629),R=n(43389),x=n(79756),O=n(14782),w=n(92759),T=n(72130),S=n(91830),I=function(e,t){e.modify({id:e.identify({__typename:"Post",id:t}),fields:{postResponses:function(e,t){return t.DELETE},threadedPostResponses:function(e,t){return t.DELETE}}})},P=function(e,t){e.modify({id:e.identify({__typename:"Catalog",id:t}),fields:{responsesCount:function(e,t){return t.DELETE},threadedCatalogResponses:function(e,t){return t.DELETE}}})},D=function(e){var t,n,o=e.response,i=e.parentEntity,a=e.hidePopoverMenu,l=(0,d.R)().value,s=r.useContext(R.o).rootEntityTypename,c=(0,T.$L)(),u=(0,h.jI)(),p=(0,b.wA)(),m=r.useState(!1),v=(0,g.A)(m,2),y=v[0],D=v[1],N=function(){return D(!1)},C=null==o||null===(t=o.creator)||void 0===t?void 0:t.id,A=r.useCallback((function(e,t,n){"Post"===t&&I(e,n),"Catalog"===t&&P(e,n)}),[]),j=(0,E.n)(k.k,{variables:{targetUserId:C||"",userId:(null==l?void 0:l.id)||""},update:function(e){A(e,i.__typename,i.id)},onCompleted:function(){N();var e=(0,x.bY)(s);p((0,S.MZ)({message:"Responses by this user have been hidden".concat(e?" from this ".concat(e):"",".")}))}}),L=(0,g.A)(j,1)[0],_=(null==l?void 0:l.id)===(null===(n=i.creator)||void 0===n?void 0:n.id);return(null==l?void 0:l.id)===C?null:l&&C&&_?r.createElement(r.Fragment,null,r.createElement(O.q3,null,r.createElement(f.N,{color:"RED",onClick:function(){D(!0)}},"Block author")),y&&r.createElement(w.D,{onConfirm:function(){c.event("user.blocked",{userId:C,source:u}),L()},isVisible:y,isInResponsesSidebar:!0,hide:function(){N(),a()}})):null},N=function(e){var t,n=e.response,o=e.onClick,i=(0,d.R)().value;return null!=i&&i.id&&(null==i?void 0:i.id)===(null===(t=n.creator)||void 0===t?void 0:t.id)?r.createElement(O.q3,null,r.createElement(f.N,{color:"RED",onClick:o},"Delete response")):null},C=n(82487),A=n(83858),j=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,o=e.confirmDialogAction;return r.createElement(A.d,{isDialogOpen:t,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:n,confirmDialogAction:o,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},L=n(42976),_=function(e){var t,n,o=e.response,i=(0,d.R)().value,a=r.useState(!1),l=(0,g.A)(a,2),s=l[0],c=l[1],u=r.useContext(C.o),p=u.setIsEditing,m=u.isEditing,v=u.setEditingQuote,h=(null===(t=o.creator)||void 0===t?void 0:t.id)===(null==i?void 0:i.id),y=r.useContext(R.o).sidebarRef;if(null!=y&&y.current&&(n=y.current.scrollTop),!h)return null;var E=o.responseDistribution===L.IZ.DISTRIBUTED;return r.createElement(r.Fragment,null,r.createElement(O.q3,null,r.createElement(f.N,{onClick:function(){E?c(!0):(o.inResponseToMediaResource&&v(o.inResponseToMediaResource.mediumQuote),p(!m))}},"Edit response")),s&&r.createElement(j,{isDialogOpen:s,cancelDialogAction:function(){c(!1),null!=y&&y.current&&(y.current.scrollTop=n)},confirmDialogAction:function(){c(!1),null!=y&&y.current&&(y.current.scrollTop=n),o.inResponseToMediaResource&&v(o.inResponseToMediaResource.mediumQuote),p(!m)}}))},M=n(22986),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"HideCatalogResponseOnParent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentCatalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogResponseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hideCatalogResponseOnParent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"parentCatalogId"},value:{kind:"Variable",name:{kind:"Name",value:"parentCatalogId"}}},{kind:"Argument",name:{kind:"Name",value:"catalogResponseId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogResponseId"}}}]}]}}]},V=n(60602),F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"HidePostResponseOnParentMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postResponseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hidePostResponseOnParentPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"parentPostId"},value:{kind:"Variable",name:{kind:"Name",value:"parentPostId"}}},{kind:"Argument",name:{kind:"Name",value:"postResponseId"},value:{kind:"Variable",name:{kind:"Name",value:"postResponseId"}}}]}]}}]};function H(e){var t=e.responseToBeHidden,n=e.parentEntity,o=e.hidePopoverMenu,i=e.includeToast,a=n.__typename,l=function(e){var t=e.postResponseId,n=e.parentPostId,o=e.hidePopoverMenu,i=e.includeToast,a=(0,T.$L)(),l=(0,h.jI)(),s=(0,S.zF)(),c=(0,r.useContext)(V.a).inResponseToEntityId,u=(0,r.useContext)(R.o).responseSortType,d=(0,E.n)(F,{variables:{postResponseId:t,parentPostId:n},update:function(e){(0,M.e)(e,c,t),i&&s({toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:t,parentPostId:c,sortType:u}}),a.event("response.hidden",{postId:t,source:l}),null==o||o()}});return(0,g.A)(d,1)[0]}({postResponseId:t.id,parentPostId:n.id,hidePopoverMenu:o,includeToast:i}),s=function(e){var t=e.catalogResponseId,n=e.parentCatalogId,o=e.hidePopoverMenu,i=e.includeToast,a=(0,T.$L)(),l=(0,h.jI)(),s=(0,S.zF)(),c=(0,r.useContext)(V.a).inResponseToEntityId,u=(0,r.useContext)(R.o).responseSortType,d=(0,E.n)(B,{variables:{catalogResponseId:t,parentCatalogId:n},update:function(e){(0,M.B)(e,c,t),i&&s({toastStyle:"HIDE_CATALOG_RESPONSE",extraParams:{responseId:t,parentCatalogId:c,sortType:u}}),a.event("response.hidden",{postId:t,source:l}),null==o||o()}});return(0,g.A)(d,1)[0]}({catalogResponseId:t.id,parentCatalogId:n.id,hidePopoverMenu:o,includeToast:i}),c=(0,r.useCallback)((function(){"Post"===a?l():"Catalog"===a&&s()}),[s,l,a]),u=function(e){var t,n,r,o=e.responseToBeHidden,i=e.parentEntity,a=(0,d.R)().value,l=i.__typename,s=(null==a?void 0:a.id)===(null===(t=i.creator)||void 0===t?void 0:t.id),c="Post"===l&&(null==i||null===(n=i.collection)||void 0===n?void 0:n.viewerEdge.isEditor);return!((null==a?void 0:a.id)===(null===(r=o.creator)||void 0===r?void 0:r.id)||"Catalog"===l&&!s||"Post"===l&&!s&&!c)}({responseToBeHidden:t,parentEntity:n});return{canHideResponse:u,hideResponse:c}}var U=function(e){var t=H({responseToBeHidden:e.responseToBeHidden,parentEntity:e.parentEntity,hidePopoverMenu:e.hidePopoverMenu,includeToast:!0}),n=t.canHideResponse,o=t.hideResponse;return n?r.createElement(O.q3,null,r.createElement(f.N,{onClick:o},"Hide response")):null},Z=n(58168),G=n(43634),Q=function(e){var t,n=e.response,o=e.parentEntity,i=e.onClick,a=(0,d.R)().value,l=o.__typename,s=(null==a?void 0:a.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);if(!n.creator||s)return null;var c="Post"===o.__typename?{post:o}:{};return r.createElement(O.q3,null,null!=a&&a.id?r.createElement(f.N,{color:"RED",onClick:i},"Report response..."):r.createElement(G.r,(0,Z.A)({operation:"register",susiEntry:(0,x.gz)(l)},c),"Report response..."))},q=n(1491),z=n(1722),K=n(56743),Y=n(39160),$=n(51771),W=function(e){var t=e.response,n=e.hidePopoverMenu,o=(0,q.f)(),i=(0,T.$L)(),a=(0,d.R)().value,l=(0,h.jI)(),s=(0,z.h)(t),c=(0,Y.Dy)((function(e){return e.multiVote.clapsPerPost})),u=(0,b.wA)(),p=(0,$.F)(c,t,s.viewerEdge),m=p.clapCount,v=p.viewerClapCount,y=r.useCallback((function(){o(t,(null==a?void 0:a.id)||"",-v),u((0,K.K7)({postId:t.id,clapCount:m-v,viewerClapCount:0,viewerHasClappedSinceFetch:!0})),i.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:v,source:l}),n()}),[n,t.id,null==a?void 0:a.id,m,v,o]);return null!=a&&a.id&&0!==m&&0!==v?r.createElement(O.q3,null,r.createElement(f.N,{onClick:y},"Undo claps")):null},J=n(8381),X=n(24960),ee=n(28993),te=n(20036),ne=n(24809),re=n(60603),oe=n(65550),ie=n(69214),ae=n(83573),le=n(21335),se=n(71984),ce=function(e){var t=e.response,n=e.parentEntity,o=e.hide,i=(0,le.cd)(t.creator).viewerEdge,a=(0,T.$L)(),l=(0,h.jI)(),s=function(e){var t,n=e.response,o=e.parentEntityTypename,i=e.parentEntityId,a=n.id,l=(null===(t=n.creator)||void 0===t?void 0:t.id)||"",s=(0,b.wA)(),c=(0,E.n)(ae.s,{variables:{targetPostId:a,targetAuthorId:l,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){s((0,S.MZ)({message:"Successfully reported post."}))}}),u=(0,g.A)(c,2),d=u[0],p=u[1];return{reportStory:r.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return d({variables:{targetPostId:a,targetAuthorId:l,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},update:function(e){n&&("Post"===o&&I(e,i),"Catalog"===o&&P(e,i))}})}),[n,d]),error:null==p?void 0:p.error,loading:null==p?void 0:p.loading}}({response:t,parentEntityTypename:n.__typename,parentEntityId:n.id}),c=s.reportStory,u=H({responseToBeHidden:t,parentEntity:n}),d=u.canHideResponse,p=u.hideResponse,m=(0,r.useCallback)((function(e,n,r){a.event("response.flagged",{postId:t.id,reason:n,source:l}),c({alsoBlockAuthor:e,reportReason:n}),r&&p()}),[c,t.id,l]);return r.createElement(se.e,{onSubmit:m,hide:o,type:"response",alreadyBlocking:!(null==i||!i.isBlocking),showAlsoHideResponse:d,isVisible:!0})},ue=function(e){var t=e.response,n=e.responseType,o=e.parentEntity,i=e.isPopoverMenuVisible,a=(0,oe.L)(),l=(0,re.e)(!!i),s=(0,g.A)(l,4),c=s[0],u=s[2],d=s[3],p=(0,re.e)(!1),m=(0,g.A)(p,3),f=m[0],v=m[1],y=m[2],E=(0,re.e)(!1),b=(0,g.A)(E,3),k=b[0],R=b[1],x=b[2];return r.createElement(r.Fragment,null,r.createElement(X.A,{isVisible:c,hide:u,hideOnOutsideClick:!0,noPortal:!0,popoverRenderFn:function(){return r.createElement(O.Ni,null,n===J.a.SIMPLE&&!a&&r.createElement(_,{response:t}),n===J.a.SIMPLE&&r.createElement(W,{response:t,hidePopoverMenu:u}),r.createElement(U,{responseToBeHidden:t,parentEntity:o,hidePopoverMenu:u}),r.createElement(D,{response:t,parentEntity:o,hidePopoverMenu:u}),r.createElement(Q,{response:t,parentEntity:o,onClick:R}),r.createElement(N,{response:t,onClick:v}))}},r.createElement(ee.P,{onClick:d,rules:(0,te.E)()},r.createElement(ne.A,null))),f&&r.createElement(ie.G,{responseId:t.id,responseDistribution:t.responseDistribution,hide:y,hidePopoverMenu:u}),k&&r.createElement(h.Ne,{source:{dimension:"report_post"},extendSource:!0},r.createElement(ce,{response:t,parentEntity:o,hide:x})))},de=n(66356),pe={display:"flex",alignItems:"center",gap:"4px",":hover p":{textDecoration:"underline"}},me=function(e){var t,n=e.response,s=e.responseType,c=e.parentEntity,g=(0,d.R)().value,E=(0,y.D)(),b=n.creator,k=n.mediumUrl,R=n.createdAt,O=(0,l.E)(b);if(!n||!b||!k)return null;var w=(null===(t=c.creator)||void 0===t?void 0:t.id)===b.id,T=(null==g?void 0:g.id)===b.id,S=null;w?S=r.createElement(u,{title:"Author",backgroundColor:E.colorTokens.background.accent.primary.base}):T&&(S=r.createElement(u,{title:"You",backgroundColor:E.colorTokens.background.neutral.secondary.base,color:E.colorTokens.foreground.neutral.secondary.base}));var I=function(e,t){return e&&t===J.a.SIMPLE}(n,s)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt);return r.createElement(m.a,{display:"flex",justifyContent:"space-between"},r.createElement(m.a,{display:"flex",alignItems:"center"},r.createElement(o.E,{user:b},r.createElement(p.H8,{scale:"XS",user:b,showBadge:!0,showHoverState:!0})),r.createElement(m.a,{paddingLeft:"12px"},r.createElement(m.a,{display:"flex",alignItems:"center"},r.createElement(o.E,{user:b,rules:pe},r.createElement(m.a,{display:"flex",alignItems:"baseline",gap:"4px"},r.createElement(v.kZ,{scale:"M",color:"DARKER",clamp:1},b.name),r.createElement(i.U,{user:b,scale:"S",clamp:1})),O&&r.createElement(m.a,{marginTop:"1px"},r.createElement(a.b,{size:"S"}))),S),r.createElement(f.N,{href:k,follow:!1},r.createElement(v.kZ,{scale:"S"},r.createElement(de.c,{timestamp:null!=R?R:0,includeMinutesAgo:!0,isSameYearShorthand:!0}),I&&r.createElement(r.Fragment,null,"Â (edited)"))))),r.createElement(h.Ne,{source:{susiEntry:(0,x.gz)(c.__typename)},extendSource:!0},r.createElement(ue,{response:n,responseType:s,parentEntity:c})))}},66274:(e,t,n)=>{n.d(t,{V:()=>s});var r=n(96540),o=n(52290),i=n(98761),a=n(44402),l={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},s=function(){var e=(0,i.h)({shimmerKeyframesName:l}).shimmerKeyframesName,t=(0,a.l)();return r.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},r.createElement(o.a,{display:"flex",flexDirection:"row"},r.createElement(o.a,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{marginLeft:"8px",marginTop:"4px"},r.createElement(o.a,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),r.createElement(o.a,{marginTop:"12px"},r.createElement(o.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))}},96009:(e,t,n)=>{n.d(t,{c:()=>m});var r=n(64467),o=n(96540),i=n(45639),a=n(44402),l=n(20239),s=n(42976),c=n(42396),u=n(38893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.inResponseToMediaResource,n=(0,a.l)(),r=(0,l.D)(),d=(0,c.x)((function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var r=n.split("--")[0];if(r){var o=document.getElementById(r);if(o){var i=(null==o?void 0:o.offsetTop)-100;i&&window.scrollTo({top:i,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),m=null==t?void 0:t.mediumQuote;if(!m)return null;var f=(0,u.Oi)(m);if(!f||!f.type)return null;var v=f.type;return v===s.FU.IMG||v===s.FU.IFRAME||v===s.FU.COVER_TITLE||v===s.FU.HR||v===s.FU.MIXTAPE_EMBED||v===s.FU.SECTION_CAPTION?null:o.createElement("div",{onClick:d,onKeyDown:d,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},o.createElement(i.i,{paragraph:p(p({},f),{},{name:"embedded-quote-".concat(m.quoteId,"-").concat(f.name)}),paragraphStyle:v,spaceTop:4,richTextStyle:"STREAM"}))}},43389:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(96540),o=n(42976),i=r.createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null},sidebarRef:null,responseDistribution:o.IZ.NOT_DISTRIBUTED,setResponseDistribution:function(){},responseSortType:o.CD.TOP,rootEntityId:"",isResponsesSidebarVisible:!1,showCreateReplyEditor:!1})},51772:(e,t,n)=>{n.d(t,{N:()=>b});var r=n(96540),o=n(84676),i=n(52290),a=n(86975),l=n(36557),s=n(44402),c=n(20239),u=n(21771),d=n(42976),p=n(86684),m=n(80591),f=n(27715),v=n(46879),h=n(96009),y=n(8381);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){return{fill:e.colorTokens.foreground.neutral.secondary.base,float:"right"}},b=function(e){var t,n,b=e.storyResponse,k=e.parentEntity,R=e.omitBottomBorder,x=(0,s.l)(),O=(0,c.D)(),w=b.creator,T=b.previewContent,S=b.mediumUrl,I=b.clapCount,P=b.responsesCount,D=null==T||null===(t=T.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(w&&T&&T.bodyModel&&S&&D))return null;var N=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.text&&(n.push(o),n.length>=2))break}}catch(e){r.e(e)}finally{r.f()}return{title:n[0],subtitle:n[1]}}(D);if(!N.title&&!N.subtitle)return null;var C,A=null!==(null===(n=b.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),j=P||0;return r.createElement(u.V,{post:b,presentationContext:"POST_PREVIEW",isFullPost:!1},r.createElement(i.a,{paddingTop:"25px",paddingBottom:"20px",borderBottom:R?void 0:"neutral.primary"},r.createElement(o.T,{response:b,responseType:y.a.STORY,parentEntity:k}),r.createElement(h.c,{inResponseToMediaResource:b.inResponseToMediaResource}),r.createElement(a.D,{href:(0,v.us)(b)},r.createElement("div",{className:x({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:A?"12px":"16px",backgroundColor:O.backgroundColor})},r.createElement("div",{className:x(E)},r.createElement(l.kZ,{scale:"S",color:"LIGHTER",tag:"div"},r.createElement(i.a,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:(null!=I?I:0)>0||j>0?"20px":"0"},(null!=I?I:0)>0?r.createElement(i.a,{display:"flex",alignItems:"center"},r.createElement(i.a,{tag:p.A,marginRight:"2px"}),r.createElement("div",null,(0,f.Ct)(null!=I?I:0))):null,j>0?r.createElement(i.a,{display:"flex",alignItems:"center"},r.createElement(i.a,{tag:m.A,marginLeft:I?"8px":"0",marginRight:"2px"}),r.createElement("div",null,(0,f.Ct)(j))):null))),r.createElement(l.kZ,{scale:"M",clamp:2,color:"DARKER"},N.title&&r.createElement(i.a,null,N.title.text),N.subtitle&&r.createElement("div",{className:x((C=N.title.type,function(e){return{color:C===d.FU.H3?e.colorTokens.foreground.neutral.secondary.base:e.colorTokens.foreground.neutral.primary.base}}))},N.subtitle.text))))))}},15939:(e,t,n)=>{n.d(t,{c:()=>v});var r=n(64467),o=n(45458),i=n(96540),a=n(8389),l=n(43389),s=n(52290),c=n(72130),u=n(49287),d=n(95087),p=n(79756);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.replies,n=e.parentEntity,r=e.inResponseToEntityId,m=e.threadDepthFromRootEntity,v=e.threadDepthOnPage,h=void 0===v?1:v,y=e.displayBottomBorder,g=void 0!==y&&y,E=e.isShowAutoExpandedResponse,b=void 0!==E&&E,k=e.autoExpandedResponseIds,R=void 0===k?[]:k,x=e.inResponseToEntityTypename,O=(0,c.$L)(),w=(0,u.jI)(),T=i.useContext(l.o),S=T.rootEntityId,I=T.rootEntityTypename,P=T.isResponsesSidebarVisible,D=T.showCreateReplyEditor,N=(0,o.A)((null==t?void 0:t.posts)||[]);return b&&(N=N.filter((function(e){return R.some((function(t){return t===e.id}))}))),i.useEffect((function(){b&&P&&N.forEach((function(e){O.event("response.autoExpanded",f(f(f({postId:e.id},(0,p.rz)(r,x)),(0,p.DL)(S,I)),{},{threadDepth:m,context:a.J.INLINE_POST_RESPONSE,source:w}))}))}),[]),N&&0!==N.length?i.createElement(s.a,null,N.map((function(e,t,o){if(!e)return null;var a=t!==o.length-1||g;return i.createElement(d.W,{reply:e,parentEntity:n,bottomBorder:a,index:t,inResponseToEntityId:r,inResponseToEntityTypename:x,key:e.id,threadDepthFromRootEntity:m,threadDepthOnPage:h,showCreateReplyEditor:D&&0===t})}))):null}},95087:(e,t,n)=>{n.d(t,{C:()=>A,W:()=>j});var r=n(64467),o=n(80045),i=n(45458),a=n(80296),l=n(77969),s=n(96540),c=n(74793),u=n(8389),d=n(70694),p=n(3737),m=n(66274),f=n(43389),v=n(51772),h=n(60602),y=n(88615),g=n(23406),E=n(85864),b=n(52290),k=n(86527),R=n(36557),x=n(72130),O=n(49287),w=n(44402),T=n(15939),S=n(51387),I=n(79756),P=n(58192),D=["__typename"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t){return function(n){return{marginBottom:e?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(n.colorTokens.border.neutral.primary.base),padding:t?"0 24px":void 0}}},j=function(e){var t,n,r,N,j,L,_=e.reply,M=e.parentEntity,B=e.bottomBorder,V=e.index,F=e.inResponseToEntityId,H=e.threadDepthOnPage,U=void 0===H?1:H,Z=e.threadDepthFromRootEntity,G=e.showCreateReplyEditor,Q=void 0!==G&&G,q=e.inResponseToEntityTypename,z=(0,w.l)(),K=(0,O.jI)(),Y=(0,x.$L)(),$=(0,s.useState)(null!==(t=_.threadedPostResponses)&&void 0!==t&&t.autoExpandedPostIds?(0,i.A)(_.threadedPostResponses.autoExpandedPostIds):[]),W=(0,a.A)($,1)[0],J=(0,s.useState)(Boolean(W.length)),X=(0,a.A)(J,2),ee=X[0],te=X[1],ne=(0,s.useContext)(f.o),re=ne.responsesLocked,oe=ne.isLockedResponse,ie=ne.inResponseToQuote,ae=ne.setInResponseToQuote,le=ne.setIsSavingResponse,se=ne.sidebarRef,ce=ne.responseDistribution,ue=ne.setResponseDistribution,de=ne.responseSortType,pe=ne.rootEntityId,me=ne.rootEntityTypename,fe=ne.isResponsesSidebarVisible,ve=(0,s.useContext)(g.u),he=ve.addContinueThisThreadSidebar,ye=ve.scrollToPostId,ge=ve.setScrollToPostId,Ee=(0,s.useState)([]),be=(0,a.A)(Ee,2),ke=be[0],Re=be[1],xe=(0,s.useRef)(null),Oe=(0,s.useRef)(null),we=null===(n=_.creator)||void 0===n?void 0:n.name;we&&(L="Replying to ".concat(we));var Te=(0,l._)(S.t,{variables:{postId:_.id,postResponsesPaging:{limit:I.TC},sortType:de},ssr:!1}),Se=(0,a.A)(Te,2),Ie=Se[0],Pe=Se[1],De=Pe.called,Ne=Pe.data,Ce=Pe.loading,Ae=Pe.fetchMore;(0,s.useEffect)((function(){var e;null!=xe&&null!==(e=xe.current)&&void 0!==e&&e.getBoundingClientRect&&xe.current.getBoundingClientRect().bottom>window.innerHeight&&xe.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]),(0,s.useEffect)((function(){var e;ye===_.id&&(null===(e=Oe.current)||void 0===e||e.scrollIntoView({behavior:"auto",block:"start"}))}),[_.id,ye,ge]);var je=null==Ne||null===(r=Ne.post)||void 0===r?void 0:r.threadedPostResponses;ee&&!De&&Ie();var Le,_e=(null==je?void 0:je.posts)||[],Me=(null===(N=_.postResponses)||void 0===N?void 0:N.count)||0,Be=(0,P.M)(ee,W,_e.length,Me),Ve=Be>0,Fe=null==je||null===(j=je.pagingInfo)||void 0===j?void 0:j.next;return Fe&&(Le=function(){if(Ae){Fe.__typename;var e=(0,o.A)(Fe,D);Ae({variables:{postId:_.id,postResponsesPaging:e}})}}),s.createElement(E.B,{initialVisibility:ee},(function(e){var t=e.isVisible,n=e.toggle,r=e.show;return s.createElement(E.B,{initialVisibility:Q},(function(e){var o,i=e.isVisible,a=e.hide,l=e.toggle;return s.createElement(b.a,{borderBottom:B?"neutral.primary":"NONE",marginLeft:"24px",marginRight:U>1?"0":"24px",ref:Oe},s.createElement(h.a.Provider,{value:{inResponseToEntityId:F,isThreadedResponsesVisible:t,inResponseToEntityTypename:q,toggleThreadedResponses:function(){De||Ie(),te(!1),n()},showThreadedResponses:function(){De||(Ie(),Y.event("response.expanded",C(C(C({postId:_.id},(0,I.rz)(F,q)),(0,I.DL)(pe,me)),{},{threadDepth:Z,context:u.J.INLINE_POST_RESPONSE,source:K}))),te(!1),r()},threadDepthFromRootEntity:Z,threadDepthOnPage:U,hideCreateReply:a,toggleCreateReply:l,loadThreadedResponses:Ie,isThreadedResponsesQueryCalled:De,isThreadedResponsesQueryLoading:Ce,showContinueThisThreadSidebar:function(){he(_)}}},s.createElement("div",{ref:0===V?xe:void 0},(0,d.kb)(_)?s.createElement(p.L,{responsePost:_,index:V,parentEntity:M,omitBottomBorder:!0}):s.createElement(O.Ne,{source:{index:V},key:_.id,extendSource:!0},s.createElement(v.N,{storyResponse:_,parentEntity:M,omitBottomBorder:!0}))),i&&s.createElement("div",{className:z(A(t,!0))},s.createElement(O.Ne,{source:{susiEntry:(0,I.gz)(q)},extendSource:!0},s.createElement(c.jG,{localStorageId:"".concat(_.id,"-reply")},s.createElement(y.Q,{parentEntityId:_.id,parentEntityTypename:"Post",hideReplyEditing:a,placeholder:L,showEditorHeader:!1}))))),t&&s.createElement("div",{className:z(A(Ve))},Ce&&s.createElement(b.a,{marginLeft:"24px"},s.createElement(m.V,null)),(null==je?void 0:je.posts)&&(null==je||null===(o=je.posts)||void 0===o?void 0:o.length)>0&&s.createElement(f.o.Provider,{value:{setIsSavingResponse:le,responsesLocked:re,isLockedResponse:oe,editingResponsesAtIndices:ke,setEditingResponsesAtIndices:Re,inResponseToQuote:ie,setInResponseToQuote:ae,sidebarRef:se,responseDistribution:ce,setResponseDistribution:ue,responseSortType:de,rootEntityId:pe,rootEntityTypename:me,isResponsesSidebarVisible:fe}},s.createElement(T.c,{replies:je,parentEntity:M,inResponseToEntityId:_.id,inResponseToEntityTypename:"Post",threadDepthOnPage:U+1,threadDepthFromRootEntity:Z+1,isShowAutoExpandedResponse:ee,autoExpandedResponseIds:W}))),Ve&&(t||ee)&&s.createElement(b.a,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},s.createElement(R.kZ,{color:"ACCENT",scale:"M"},s.createElement(k.N,{linkStyle:"OBVIOUS",onClick:function(){ee?(te(!1),r()):Le()}},(0,P.s)(ee,Be)))))}))}))}},88615:(e,t,n)=>{n.d(t,{Q:()=>B});var r=n(82284),o=n(10467),i=n(80296),a=n(64467),l=n(96540),s=n(69733),c=n(17180),u=n(8389),d=n(43389),p=n(60602),m=n(45458),f=n(95420),v=n(79756),h=n(16765),y=n(62544),g=n(92571),E={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishCatalogResponseMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToCatalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deltas"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Delta"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseDistributionType"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publishCatalogResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inResponseToCatalogId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToCatalogId"}}},{kind:"Argument",name:{kind:"Name",value:"deltas"},value:{kind:"Variable",name:{kind:"Name",value:"deltas"}}},{kind:"Argument",name:{kind:"Name",value:"responseDistribution"},value:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}}]}}]}}]}}].concat((0,m.A)(y.UZ.definitions),(0,m.A)(g.uS.definitions),(0,m.A)(g.jC.definitions))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=n(99836),x=n(78265),O=n(41281),w={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PublishPostThreadedResponse_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}}]}}].concat((0,m.A)(y.UZ.definitions),(0,m.A)(g.uS.definitions),(0,m.A)(g.jC.definitions))},T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishPostThreadedResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deltas"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Delta"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToQuoteId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseDistributionType"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publishPostThreadedResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inResponseToPostId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToPostId"}}},{kind:"Argument",name:{kind:"Name",value:"deltas"},value:{kind:"Variable",name:{kind:"Name",value:"deltas"}}},{kind:"Argument",name:{kind:"Name",value:"inResponseToQuoteId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToQuoteId"}}},{kind:"Argument",name:{kind:"Name",value:"responseDistribution"},value:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PublishPostThreadedResponse_post"}}]}}]}}].concat((0,m.A)(w.definitions))};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=n(36557),D=n(72130),N=n(49287),C=n(44402),A=n(42976),j=n(91830);function L(){L=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),l=new N(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",f="suspendedYield",v="executing",h="completed",y={};function g(){}function E(){}function b(){}var k={};u(k,l,(function(){return this}));var R=Object.getPrototypeOf,x=R&&R(R(C([])));x&&x!==n&&o.call(x,l)&&(k=x);var O=b.prototype=g.prototype=Object.create(k);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,l,s){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,r.A)(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=m;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=I(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var c=p(t,n,r);if("normal"===c.type){if(o=r.done?h:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=h,r.method="throw",r.arg=c.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,r.A)(t)+" is not iterable")}return E.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:E,configurable:!0}),E.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},w(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(O),u(O,c,"Generator"),u(O,l,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e){var t=e.parentEntityId,n=e.parentEntityTypename,r=e.placeholder,a=e.hideReplyEditing,y=void 0===a?function(){}:a,g=e.editorOpenByDefault,b=void 0===g||g,S=e.showEditorHeader,_=void 0===S||S,B=e.viewerPronouns,V=e.autofocus,F=e.scrollIntoView,H=void 0===F||F,U=e.showPublishCheckbox,Z=void 0===U?!b:U,G=l.useContext(d.o),Q=G.setIsSavingResponse,q=G.responsesLocked,z=G.inResponseToQuote,K=G.setInResponseToQuote,Y=G.responseDistribution,$=G.setResponseDistribution,W=G.responseSortType,J=G.rootEntityId,X=G.rootEntityTypename,ee=l.useContext(p.a),te=ee.showThreadedResponses,ne=ee.isThreadedResponsesQueryLoading,re=ee.threadDepthFromRootEntity,oe=(0,N.jI)(),ie=(0,D.$L)(),ae=(0,s.wA)(),le=(0,C.l)(),se=l.useRef(null);l.useEffect((function(){var e;H&&null!=se&&null!==(e=se.current)&&void 0!==e&&e.getBoundingClientRect&&se.current.getBoundingClientRect().bottom>window.innerHeight&&se.current.scrollIntoView({behavior:"smooth",block:"end"})}),[H]);var ce=l.useCallback((function(e){Q(!1);var t="Something went wrong. Please try again.";(0,c._5)(e)?t="Youâve reached the limit for responses that can be published in one day.":(0,c.El)(e)&&(t="This post is not accepting responses."),ae((0,j.MZ)({message:t,toastStyle:"ERROR"}))}),[]),ue=l.useCallback((function(e){if(e){ie.event("inlineEditor.publish",{postId:t,context:u.J.INLINE_POST_RESPONSE,source:oe});var r=(0,v.DL)(J,X),o=(0,v.rz)(t,n);ie.event("response.created",M(M(M({postId:e.id},o),r),{},{threadDepth:re+1,context:u.J.INLINE_POST_RESPONSE,source:oe})),e.responseDistribution===A.IZ.DISTRIBUTED&&ie.event("response.distributed",M(M(M({postId:e.id},o),r),{},{threadDepth:re+1,context:u.J.INLINE_POST_RESPONSE,source:oe})),Q(!1),te(),e.responseDistribution===A.IZ.DISTRIBUTED&&(ae((0,j.MZ)({toastStyle:"PUBLISH_RESPONSE",extraParams:{response:e},duration:5e3})),$(A.IZ.NOT_DISTRIBUTED))}}),[ie,oe,re,J,X,t,n,te]),de=function(e){var t=e.parentPostId,n=e.onCompleted,r=e.onError;return(0,f.n)(T,{update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.publishPostThreadedResponse;if(o){var i=e.writeFragment({data:o,fragment:w,fragmentName:"PublishPostThreadedResponse_post"});e.modify({id:e.identify({__typename:"Post",id:t}),fields:{postResponses:function(e){var t;return I(I({},e),{},{count:(null!==(t=null==e?void 0:e.count)&&void 0!==t?t:0)+1})},threadedPostResponses:function(e){return I(I({},e),{},{posts:e.posts?[i].concat((0,m.A)(e.posts)):[i]})}}})}},onCompleted:n,onError:r})}({parentPostId:t,onCompleted:function(e){ue(null==e?void 0:e.publishPostThreadedResponse)},onError:function(e){ce(null==e?void 0:e.graphQLErrors)}}),pe=(0,i.A)(de,2),me=pe[0],fe=pe[1],ve=fe.loading,he=fe.error,ye=function(e){var t=e.parentCatalogId,n=e.responseSortType,r=e.onCompleted,o=e.onError;return(0,f.n)(E,{update:function(e,r){var o,i,a,l,s=function(e,t,n){return{id:e.identify({__typename:"Catalog",id:t}),fragment:h.Kl,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultCatalogResponses",variables:{sortType:n,defaultPagingOptions:{limit:v.TC}}}}(e,t,n),c=(i=e.readFragment(s),l=null==(o=r.data)?void 0:o.publishCatalogResponse,null!=i&&i.threadedCatalogResponses&&"Post"===(null==l?void 0:l.__typename)?k(k({},i),{},{responsesCount:(i.responsesCount||0)+1,threadedCatalogResponses:k(k({},i.threadedCatalogResponses),{},{posts:[l].concat((0,m.A)((null===(a=i.threadedCatalogResponses)||void 0===a?void 0:a.posts)||[]))})}):null);null!==c&&e.writeFragment(k(k({},s),{},{data:k({},c)}))},onCompleted:r,onError:o})}({parentCatalogId:t,responseSortType:W,onCompleted:function(e){ue(null==e?void 0:e.publishCatalogResponse)},onError:function(e){ce(null==e?void 0:e.graphQLErrors)}}),ge=(0,i.A)(ye,2),Ee=ge[0],be=ge[1],ke=be.loading,Re=be.error,xe=l.useCallback((function(e,r){return Q(!0),"Post"===n?me({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:(null==z?void 0:z.id)||null,responseDistribution:Y||null,sortType:W}}).then((function(e){var t;null!=e&&null!==(t=e.data)&&void 0!==t&&t.publishPostThreadedResponse?r():null!=e&&e.errors&&ce(e.errors)})):"Catalog"===n?Ee({variables:{inResponseToCatalogId:t,deltas:e,responseDistribution:Y||null,sortType:W}}).then((function(e){var t;null!=e&&null!==(t=e.data)&&void 0!==t&&t.publishCatalogResponse?r():null!=e&&e.errors&&ce(e.errors)})):void 0}),[n,t,z,Y,W]),Oe=l.useCallback((0,o.A)(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(void 0),y(),e.abrupt("return",{preventStateUpdate:!1});case 3:case"end":return e.stop()}}),e)}))),[y]),we=(0,c.Ox)(he)||(0,c.Ox)(Re)||q;return l.useEffect((function(){we&&Q(!1)}),[we]),we?l.createElement(R.x,{message:(0,v.it)(X)}):l.createElement("div",{ref:se},l.createElement(P.kZ,{scale:"M",color:"DARKER",tag:"div"},l.createElement("div",{className:le({lineHeight:"24px"})},l.createElement(O.d,{isPublishingResponse:ve||ke,publishResponse:xe,type:x.o.create,inResponseToQuote:z,onClose:Oe,editorOpenByDefault:b,placeholder:r,showEditorHeader:_,disableReplyButton:ne,showPublishCheckbox:Z,responseDistribution:Y,toggleResponseDistribution:function(){Y===A.IZ.DISTRIBUTED?$(A.IZ.NOT_DISTRIBUTED):$(A.IZ.DISTRIBUTED)},viewerPronouns:B,autofocus:V}))))}},99836:(e,t,n)=>{n.d(t,{x:()=>u});var r=n(96540),o=n(43389),i=n(79756),a=n(52290),l=n(86527),s=n(36557),c=n(46879),u=function(e){var t=e.message,n=r.useContext(o.o).rootEntityTypename,u=(0,i.bY)(n),d="The author has closed discussion".concat(u?" for this ".concat(u):"","."),p=t||d;return r.createElement(a.a,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},r.createElement(s.kZ,{scale:"M",tag:"span",color:"DARKER"},p," ",r.createElement(l.N,{href:(0,c.GPf)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},78265:(e,t,n)=>{var r;n.d(t,{o:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},41281:(e,t,n)=>{n.d(t,{d:()=>ye});var r,o=n(82284),i=n(80296),a=n(10467),l=n(64467),s=n(2404),c=n.n(s),u=n(96540),d=n(42295),p=n(38913),m=n(70600),f=n(74793),v=n(47266),h=n(37333),y=n(70694),g=n(27799),E=n(86143),b=n(18677),k=n(60602),R=n(45639),x=n(44402),O=n(42976),w=n(38893),T=function(e){var t=e.quote,n=(0,x.l)();if(!t)return null;var r=(0,w.Oi)(t);return r?u.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},u.createElement(R.i,{paragraph:r,paragraphStyle:O.FU.P,spaceTop:4,richTextStyle:"STREAM"})):null},S=function(e){var t=e.onFocus,n=e.responseContent,r=e.setResponseContent,o=e.setIsEmpty,i=e.isEditorOpen,a=(0,x.l)();return u.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;o(!t),r(t)},onFocus:t,className:a({width:"100%",padding:"14px",resize:"none",minHeight:i?"100px":"0",height:i?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},I=n(24960),P=n(5600),D=n(36557),N=n(20239),C=n(18642),A=n(78693),j=n(44379);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(null,arguments)}const _=function(e){return u.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21"},e),r||(r=u.createElement("path",{fill:"#000",d:"m5.82 6.215-1.776 4.993h3.63zm-.281-1.89h1.186l4.316 11.268 1.08.22v.738H8.036v-.738l1.116-.088.132-.255-1.301-3.436H3.737L2.454 15.47l.184.255 1.17.088v.738H.282v-.738l1.037-.22zM17.949 14.899v-3.173q-2.259.624-2.971 1.143-.703.518-.703 1.362 0 .677.387 1.081.395.396 1.054.396.423 0 .967-.203.554-.202 1.266-.606m0 .606q-.87.598-1.6.888-.72.282-1.353.281-1.046 0-1.68-.633-.623-.632-.623-1.67 0-1.15.94-1.81.95-.66 4.316-1.468v-.571q0-1.134-.37-1.573-.368-.44-1.283-.44-.343 0-.676.07a4.4 4.4 0 0 0-.695.212v1.511h-1.239q-.325 0-.448-.114-.114-.123-.114-.44 0-.878 1.01-1.458 1.02-.58 2.628-.58 1.416 0 2.057.615.642.615.641 1.977v5.22l.308.291.95.088v.65h-2.532z"})))};var M=n(58952),B=n(79200),V=function(e,t,n){var r=t&&!e;return{margin:"0 4px",cursor:e?"default":"pointer",opacity:e?"0.3":"1",padding:"6px",borderRadius:"4px",display:"inline-flex",justifyContent:"center",backgroundColor:r?n.colorTokens.background.accent.quaternary.base:null,":hover":{backgroundColor:e?null:t?n.colorTokens.background.accent.quaternary.base:n.colorTokens.background.neutral.secondary.base},"> svg > path":{fill:r?n.colorTokens.background.accent.primary.base:C.Dx},"> span > svg > path":{fill:r?n.colorTokens.background.accent.primary.base:C.Dx}}},F=function(e){var t=e.editor,n=e.buttonKeys,r=e.showSubMenu,o=e.disabled,i=e.setShowSubMenu,a=(0,x.l)();return t&&n&&n.length>0?u.createElement(I.A,{disablePortalOverlay:!0,isVisible:r&&!o,noArrow:!0,noPortal:!0,placement:"top",targetDistance:10,popoverRenderFn:function(){return u.createElement(D.kZ,{tag:"span",scale:"M"},u.createElement("span",{className:a({display:"flex",padding:"8px 4px"})},n.map((function(e){return u.createElement(H,{key:e,format:e,disabled:o,slateEditor:t,showSubMenu:r,setShowSubMenu:i})}))))},customZIndex:A.Ay.selectionMenu,referenceHeight:"100%",refTag:"span",shouldAnimateOpen:!0},u.createElement(_,null)):null},H=function(e){var t=e.format,n=e.disabled,r=e.slateEditor,o=e.subMenuKeys,i=void 0===o?[]:o,a=e.showSubMenu,l=e.setShowSubMenu,s=(0,x.l)(),c=(0,N.D)(),d=(0,f.Yd)(),p=d.setBackgroundSelection,m=d.setMode,v=t===q?a:(0,y.At)(r,t);if(!p||!m)return null;var h=function(e){switch(e){case Z:return"Bold (âB)";case G:return"Italic (âI)";case Q:return"Link (âK)";case q:return"Formatting options";default:return"Click to format"}}(t);return u.createElement(P.G,{tooltipText:h,targetDistance:10,isVisible:!(t===q&&a)},u.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:function(e){if(e.stopPropagation(),!n)switch(t){case"title":case"bq":return(0,y.qj)(r,t);case q:return void l(!a);default:return(0,y.wh)(r,t)}},className:s(V(n,v,c))},function(e,t,n,r,o,i){switch(e){case Z:return u.createElement(j.A,null);case G:return u.createElement(M.A,null);case Q:return u.createElement(B.A,null);case q:return u.createElement(F,{editor:n,buttonKeys:r,showSubMenu:t,disabled:o,setShowSubMenu:i})}}(t,v,r,i,n,l)))},U=n(52290),Z="bold",G="italic",Q="link",q="format",z=function(e){var t=e.editor,n=e.disabled,r=e.showSubMenu,o=e.setShowSubMenu;return 3===e.editorDepth?u.createElement(D.kZ,{tag:"span",scale:"M"},u.createElement(H,{key:q,format:q,disabled:n,slateEditor:t,subMenuKeys:[Z,G],showSubMenu:r,setShowSubMenu:o})):u.createElement(D.kZ,{tag:"span",scale:"M"},u.createElement(U.a,{display:"flex"},u.createElement(H,{key:Z,format:Z,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o}),u.createElement(H,{key:G,format:G,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o})))},K=n(78265),Y=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0}).includeInitialDeltas,n=[],r=e.split("\n");return t&&(n=[{type:8,index:0,section:{name:$(),startIndex:0}}]),r.forEach((function(e,t){n.push({type:1,paragraph:{markups:[],name:$(),text:e,type:1},verifySameName:!1,index:t})})),n},$=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},W=n(79756),J=n(75636),X=n(27721),ee=n(43634),te=n(23393),ne=n(99731),re=n(53424),oe=n(1771),ie=n(46445),ae=function(e){var t=e.isVisible,n=e.hide,r=(0,X.R)().value;return u.createElement(oe.T,null,(function(e){var o=e.mutate;return u.createElement(ie.T,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){o()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==r?void 0:r.unverifiedEmail,".")}))},le=n(39),se=n(61333);function ce(){ce=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),l=new N(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",f="suspendedYield",v="executing",h="completed",y={};function g(){}function E(){}function b(){}var k={};u(k,l,(function(){return this}));var R=Object.getPrototypeOf,x=R&&R(R(C([])));x&&x!==n&&r.call(x,l)&&(k=x);var O=b.prototype=g.prototype=Object.create(k);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,l,s){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,o.A)(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=m;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=I(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var c=p(t,n,r);if("normal"===c.type){if(o=r.done?h:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=h,r.method="throw",r.arg=c.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,o.A)(t)+" is not iterable")}return E.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:E,configurable:!0}),E.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},w(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(O),u(O,c,"Generator"),u(O,l,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(){return{"& button":{border:"none"}}},me="400ms",fe="300ms",ve=function(e,t){var n=de(de({},t),{},{display:"flex"});return de(de({},n),{},e?{transition:"opacity ".concat(me,", max-height ").concat(me),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(me,", max-height ").concat(me),opacity:0,maxHeight:0})},he=function(e){return{transition:"min-height ".concat(me),minHeight:e?"100px":"15px",'& [data-slate-placeholder="true"]':{top:0}}},ye=function(e){var t,n=e.createdAt,r=e.isPublishingResponse,o=e.disableReplyButton,l=void 0!==o&&o,s=e.publishResponse,R=e.type,w=void 0===R?K.o.create:R,I=e.onClose,P=void 0===I?(0,a.A)(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):I,C=e.inResponseToQuote,A=e.initialValue,j=e.placeholder,L=void 0===j?"What are your thoughts?":j,_=e.editorOpenByDefault,M=void 0!==_&&_,B=e.showEditorHeader,V=void 0===B||B,F=e.showPublishCheckbox,H=void 0!==F&&F,Z=e.responseDistribution,G=void 0===Z?O.IZ.NOT_DISTRIBUTED:Z,Q=e.toggleResponseDistribution,q=e.viewerPronouns,$=e.autofocus,oe=void 0===$||$,ie=w===K.o.edit,ue=(0,x.l)(),ye=(0,N.D)(),ge=!!(0,J.z)({name:"enable_lite_response_markup",placeholder:!1}),Ee=(0,se.n8)(navigator.userAgent),be=w===K.o.edit,ke=(0,f.Yd)(),Re=ke.value,xe=ke.clearValue,Oe=(0,g.AO)([g.dn]),we=Oe.editor,Te=Oe.renderLeaf,Se=Oe.renderElement,Ie=(0,E.z)(we),Pe=(0,u.useCallback)((function(e){ge&&Ie(e)}),[E.z,ge]),De=null===we.selection,Ne=(0,u.useState)(!1),Ce=(0,i.A)(Ne,2),Ae=Ce[0],je=Ce[1],Le=(0,u.useContext)(k.a),_e=Le.threadDepthOnPage,Me=Le.inResponseToEntityTypename,Be=_e+ +!ie,Ve=(0,u.useState)(ie||M),Fe=(0,i.A)(Ve,2),He=Fe[0],Ue=Fe[1],Ze=(0,u.useState)(!0),Ge=(0,i.A)(Ze,2),Qe=Ge[0],qe=Ge[1],ze=(0,u.useState)(null),Ke=(0,i.A)(ze,2),Ye=Ke[0],$e=Ke[1],We=(0,u.useState)(!1),Je=(0,i.A)(We,2),Xe=Je[0],et=Je[1],tt=(0,u.useState)((t=A)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),nt=(0,i.A)(tt,2),rt=nt[0],ot=nt[1],it=(0,u.useRef)(d.Node.string(we)),at=(0,u.useState)(!1),lt=(0,i.A)(at,2),st=lt[0],ct=lt[1],ut=(0,u.useCallback)((function(){return ct(!1)}),[]),dt=(0,X.R)().value,pt=(0,le.Z)({name:"detail",scale:"M",color:"DARKER"}),mt=(0,u.useCallback)((function(){je(!1)}),[]),ft=(0,u.useCallback)((function(){Ue(!0)}),[]),vt=(0,u.useCallback)((function(){(0,y.yF)(we),je(!1)}),[]),ht=(0,u.useCallback)((function(){P().then((function(e){e.preventStateUpdate||(Ue(!1),Ee?ot(""):(0,y.bK)(we),null==xe||xe())}))}),[P]),yt=(0,u.useCallback)((function(){return Ee?Y(rt,ie?{includeInitialDeltas:!1}:void 0):(0,y.Mr)(we,ie?{includeInitialDeltas:!1}:void 0)}),[rt,ie]);(0,u.useEffect)((function(){C&&Ue(!0)}),[C]),(0,u.useEffect)((function(){var e=d.Node.string(we);qe(e.trim().length<=0);var t=yt();et(!c()(Ye,t)),e!==it.current&&je(!1),it.current=e}),[Re]),(0,u.useEffect)((function(){var e=yt();$e(e)}),[A]),(0,u.useEffect)((function(){oe&&He&&!Ee&&(M||be||p.rL.blur(we),setTimeout((function(){return p.rL.focus(we)}),0))}),[He,oe]);var gt,Et,bt,kt,Rt,xt=u.createElement("div",{className:ue(ve(He,{padding:"0 14px",alignSelf:"flex-end"}))},(ge||!H)&&u.createElement("div",{className:ue(pe)},u.createElement(ne.$n,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return ht()},"data-testid":"CancelResponseButton"},"Cancel")),u.createElement(ne.$n,{buttonStyle:"STRONG",size:"SMALL",disabled:Qe||r||!Xe||l,onClick:function(){var e=Ee?Y(rt,ie?{includeInitialDeltas:!1}:void 0):(0,y.Mr)(we,ie?{includeInitialDeltas:!1}:void 0);null!=dt&&dt.unverifiedEmail?ct(!0):s(e,ht)},"data-testid":"ResponseRespondButton"},ie?"Update":"Respond")),Ot=u.createElement(z,{editor:we,disabled:De,showSubMenu:Ae,setShowSubMenu:je,editorDepth:Be}),wt=u.createElement("span",{role:"checkbox","aria-checked":G===O.IZ.DISTRIBUTED,tabIndex:0,onMouseDown:function(e){e.preventDefault(),De||null==Q||Q()},onKeyDown:function(e){!De&&e&&"Enter"===e.key&&(null==Q||Q())}},u.createElement(re.S,{checked:G===O.IZ.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px",disabled:De},"Also publish to my profile"));return u.createElement(U.a,{marginBottom:M?"0":"20px"},u.createElement("div",{className:ue({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:He?"14px":"0",paddingBottom:He?"14px":"0",transition:"padding-top ".concat(me,", padding-bottom ").concat(me)})},dt&&V&&u.createElement("div",{className:ue((kt=He,Rt={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},de(de({},Rt),{},kt?{transition:"opacity ".concat(me,", max-height ").concat(me,", margin-bottom ").concat(me),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(fe,", max-height ").concat(fe,", margin-bottom ").concat(fe),opacity:0,maxHeight:0,marginBottom:"0"})))},u.createElement(U.a,{display:"flex",alignItems:"center"},u.createElement(te.H8,{scale:"XS",user:dt,showBadge:!0}),u.createElement(U.a,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},u.createElement(U.a,{display:"flex",flexWrap:"wrap",alignItems:"baseline"},u.createElement("span",{className:ue([pt,{wordBreak:"break-word",paddingRight:"4px"}])},dt.name),q&&u.createElement(m.U,{user:q,scale:"S",paddingTop:"2px"})),ie&&n&&u.createElement(D.kZ,{scale:"M",color:"LIGHTER"},u.createElement(b.f,{timestamp:n}))))),He&&u.createElement(T,{quote:C}),u.createElement(U.a,{display:"flex",flexDirection:"column",position:"relative"},dt?u.createElement("div",{className:ue(he(He))},Ee?u.createElement(S,{onFocus:ft,responseContent:rt,setIsEmpty:qe,setResponseContent:ot,isEditorOpen:He}):u.createElement(U.a,{padding:"14px"},u.createElement(h.j,{editor:we},u.createElement(v.a,{onFocus:ft,onBlur:mt,onClick:vt,renderLeaf:Te,renderElement:Se,placeholder:L,onKeyDown:Pe,autofocus:oe})))):u.createElement(ee.r,{operation:"register",susiEntry:(0,W.gz)(Me)},u.createElement(U.a,{padding:"14px"},u.createElement(D.kZ,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),(bt=ge?Ot:H?wt:null)?u.createElement("div",{className:ue(ve(He,{justifyContent:"space-between",marginLeft:"".concat(ge?"10px":"14px"),color:ye.colorTokens.foreground.neutral.secondary.base}))},bt,xt):xt,u.createElement("div",{className:ue((gt=!!dt,Et=He,{right:"14px",bottom:gt?"10px":"8px",position:"absolute",pointerEvents:"none",opacity:Et?0:1,transition:"opacity 100ms".concat(Et?"":" 200ms")}))},u.createElement(ne.$n,{buttonStyle:"STRONG",size:"SMALL",disabled:!0},"Respond")))),u.createElement(ae,{isVisible:st,hide:ut}),ge&&H&&u.createElement("div",{className:ue(ve(He,{marginTop:"14px"}))},wt))}},16022:(e,t,n)=>{n.d(t,{n:()=>f});var r=n(64467),o=n(96540),i=n(53259),a=n.n(i),l=n(26365),s=n(95765),c=n(78265);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={delay:1e3,timeout:2e4,loading:function(e){return e.error?o.createElement(l.z,{error:e.error}):e.timedOut?o.createElement(l.z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?o.createElement(s.x,null):null}},m=a()(d(d({},p),{},{loader:function(){return n.e(5258).then(n.bind(n,15279))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[15279]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return o.createElement(n,t)}})),f=function(e){var t=e.parentEntityId,n=e.parentEntityTypename,r=e.responseId,i=e.parentCreatorName,a=e.parentEntitySlug,l=e.type,s=void 0===l?c.o.create:l,u=e.initialValue,d=e.viewerPronouns,p=e.editorOpenByDefault,f=e.autofocus,v=e.scrollIntoView,h=e.showPublishCheckbox;return o.createElement(m,{parentEntitySlug:a,parentEntityId:t,parentEntityTypename:n,parentCreatorName:i,responseId:r,type:s,initialValue:u,viewerPronouns:d,editorOpenByDefault:p,autofocus:f,scrollIntoView:v,showPublishCheckbox:h})}},11211:(e,t,n)=>{n.d(t,{U:()=>R});var r=n(96540),o=n(79756),i=n(52290),a=n(86527),l=n(49287),s=n(44402),c=n(52752),u=n(14782),d=n(80296),p=n(43389),m=n(3005),f=n(99731),v=n(56942),h=n(36557),y=function(){return{fontStyle:"italic",textAlign:"center"}},g=function(e){var t,n=e.responsesLocked,l=e.unlockResponses,c=e.lockResponses,g=(0,s.l)(),E=r.useContext(p.o).rootEntityTypename,b=r.useState(!1),k=(0,d.A)(b,2),R=k[0],x=k[1];t=!0===n?r.createElement(a.N,{onClick:l},"Open discussion"):r.createElement(a.N,{onClick:function(){return x(!0)}},"Close discussion");var O="Closing a discussion prevents responses from being added or edited",w=(0,o.bY)(E);return r.createElement(r.Fragment,null,r.createElement(u.q3,null,t),R&&r.createElement(m.l,{isVisible:R,hide:function(){return x(!1)},withCloseButton:!1,noPortal:!0,padding:50},r.createElement(i.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},r.createElement(v.DZ,{scale:"M"},"Close Discussion"),r.createElement(i.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},r.createElement(h.kZ,{scale:"M",color:"DARKER"},w?"".concat(O," on your ").concat(w,". Existing responses will remain on your ").concat(w,"."):O)),r.createElement(i.a,{display:"flex",marginBottom:"20px"},r.createElement(a.N,{onClick:function(){return x(!1)}},r.createElement(h.kZ,{scale:"M",color:"DARKER"},"Cancel")),r.createElement(i.a,{marginLeft:"25px"},r.createElement(f.$n,{buttonStyle:"ERROR",onClick:c,"data-test-id":"close-discussion-button"},"Close discussion"))),r.createElement("div",{className:g(y)},r.createElement(h.kZ,{scale:"M"},"You can reopen the discussion at any time.")))))},E={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},b=function(e){var t=e.responsesLocked,n=e.isPopoverMenuVisible,o=e.hidePopoverMenu,i=e.lockResponses,l=e.unlockResponses,c=e.manageResponsesLink,d=(0,s.l)(),p=r.useRef(null);return r.useEffect((function(){var e=function(e){var t;null!=p&&null!==(t=p.current)&&void 0!==t&&t.contains(e.target)||o()};if(n)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[n]),r.createElement("div",{className:d(E),ref:p},r.createElement(u.Ni,null,c&&r.createElement(u.q3,null,r.createElement(a.N,{href:c},"Manage responses")),r.createElement(g,{responsesLocked:t,hidePopoverMenu:o,lockResponses:i,unlockResponses:l})))},k=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},R=function(e){var t=e.responsesLocked,n=e.infoLink,u=e.lockResponses,d=e.unlockResponses,p=e.hidePopoverMenu,m=e.isPopoverMenuVisible,f=e.handleClickOverflowDots,v=e.parentEntityTypename,h=(0,s.l)(),y="managementPopoverMenu";return r.createElement(i.a,null,r.createElement(a.N,{"aria-controls":y,"aria-expanded":m?"true":"false",onClick:f,inline:!0,className:h(k)},r.createElement(c.A,null)),m&&r.createElement("div",{id:y,className:h({position:"relative"})},r.createElement(l.Ne,{source:{susiEntry:(0,o.gz)(v)},extendSource:!0},r.createElement(b,{responsesLocked:t,isPopoverMenuVisible:m,hidePopoverMenu:p,manageResponsesLink:n,unlockResponses:d,lockResponses:u}))))}},21044:(e,t,n)=>{n.d(t,{J:()=>i});var r=n(80296),o=n(96540),i=function(){var e=o.useState(!1),t=(0,r.A)(e,2),n=t[0],i=t[1];return{handleClickOverflowDots:o.useCallback((function(e){e.nativeEvent.stopPropagation(),i(!n)}),[n]),hidePopoverMenu:o.useCallback((function(){i(!1)}),[]),isPopoverMenuVisible:n}}},69214:(e,t,n)=>{n.d(t,{G:()=>h,F:()=>v});var r=n(80296),o=n(95420),i=n(96540),a=n(83858),l=n(72130),s=n(49287),c=n(42976),u=n(91830),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteResponseMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"responseId"}}}]}]}}]},p=n(22986),m=n(43389),f=n(60602),v=function(){return i.createElement("div",null,"Deleted responses are gone forever.",i.createElement("br",null),"Are you sure?")},h=function(e){var t,n=e.responseDistribution,h=e.responseId,y=e.hidePopoverMenu,g=e.hide,E=n===c.IZ.DISTRIBUTED,b=E?"Delete response and story":"Delete",k=E?"This response is also a story on your profile. Are you sure you want to delete this response?":i.createElement(v,null),R=(0,l.$L)(),x=(0,s.jI)(),O=(0,u.zF)(),w=(0,i.useContext)(f.a),T=w.inResponseToEntityId,S=w.inResponseToEntityTypename,I=(0,i.useContext)(m.o).sidebarRef,P=(0,o.n)(d,{variables:{responseId:h},update:function(e){if("Post"===S)(0,p.e)(e,T,h);else{if("Catalog"!==S)return;(0,p.B)(e,T,h)}R.event("responses.removed",{postId:h,source:x}),O({message:"Successfully deleted response."}),null==y||y()}}),D=(0,r.A)(P,1)[0];null!=I&&I.current&&(t=I.current.scrollTop);var N=(0,i.useCallback)((function(){null==g||g(),null!=I&&I.current&&(I.current.scrollTop=t)}),[g,t]);return i.createElement(a.d,{dialogHeading:b,dialogDescription:k,cancelDialogAction:N,confirmDialogAction:D,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:g,isDialogOpen:!0})}},83858:(e,t,n)=>{n.d(t,{d:()=>d});var r=n(96540),o=n(43389),i=n(3005),a=n(52290),l=n(86527),s=n(99731),c=n(56942),u=n(36557),d=function(e){var t=e.isDialogOpen,n=e.dialogHeading,d=e.dialogDescription,p=e.cancelDialogAction,m=e.confirmDialogAction,f=e.confirmDialogButtonText,v=e.confirmButtonStyle,h=void 0===v?"STRONG":v,y=e.hide,g=r.useContext(o.o).sidebarRef,E=function(e){var t;null!=g&&null!==(t=g.current)&&void 0!==t&&t.style&&(g.current.style.overflowY=e?"hidden":"")};return r.useEffect((function(){return E(t),function(){E(!1)}}),[t]),r.createElement(i.l,{isVisible:t,hide:y,withCloseButton:!1,noPortal:!0,padding:50},r.createElement(a.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},r.createElement(c.DZ,{scale:"M"},n),r.createElement(a.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},r.createElement(u.kZ,{scale:"M",color:"DARKER"},d)),r.createElement(a.a,{display:"flex",marginBottom:"20px"},r.createElement(l.N,{onClick:p},r.createElement(u.kZ,{scale:"M",color:"DARKER"},"Cancel")),r.createElement(a.a,{marginLeft:"25px"},r.createElement(s.$n,{buttonStyle:h,onClick:m,"data-test-id":"close-discussion-button"},f)))))}},22986:(e,t,n)=>{n.d(t,{B:()=>l,e:()=>a});var r=n(64467);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(e,t,n){e.modify({id:"Post:".concat(t),fields:{postResponses:function(e){var t;return i(i({},e),{},{count:(null!==(t=e.count)&&void 0!==t?t:1)-1})},threadedPostResponses:function(e,t){var r=t.readField;return i(i({},e),{},{posts:((null==e?void 0:e.posts)||[]).filter((function(e){return r("id",e)!==n}))})}}})},l=function(e,t,n){e.modify({id:"Catalog:".concat(t),fields:{threadedCatalogResponses:function(e,t){var r=t.readField;return i(i({},e),{},{posts:((null==e?void 0:e.posts)||[]).filter((function(e){return r("id",e)!==n}))})},responsesCount:function(e){return(null!=e?e:1)-1}}})}},8381:(e,t,n)=>{var r;n.d(t,{a:()=>r}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(r||(r={}))},58192:(e,t,n)=>{n.d(t,{M:()=>i,s:()=>a});var r=n(55127),o=n.n(r),i=function(e,t,n,r){var o=t.length;return o&&e?r-o:n?r-n:0},a=function(e,t){return e?"Show ".concat(t," more ").concat(o()("reply",t)):"Load more replies (".concat(t,")")}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2527.711e5ff7.chunk.js.map