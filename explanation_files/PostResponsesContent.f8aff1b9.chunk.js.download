"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[2886],{16765:(e,n,i)=>{i.d(n,{M8:()=>k,Kl:()=>p,X2:()=>c});var t=i(45458),a=i(62544),o=i(53521),d=i(92571),s=i(19176),l=i(93240),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebarContent_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"responsesCount"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedRepliesParentEntity_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getCatalogSlugId_Catalog"}}]}}].concat((0,t.A)(s.DM.definitions),(0,t.A)(l.S.definitions))},m=([{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebarContent_threadedPostResponseConnection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ThreadedPostResponseConnection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}},{kind:"Field",name:{kind:"Name",value:"to"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedReplies_threadedPostResponseConnection"}}]}}].concat((0,t.A)(s.Dv.definitions)),{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebar_threadedCatalogResponseConnection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ThreadedCatalogResponseConnection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}},{kind:"Field",name:{kind:"Name",value:"to"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"posts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_post"}}]}}]}}]}}].concat((0,t.A)(a.UZ.definitions),(0,t.A)(d.uS.definitions),(0,t.A)(d.jC.definitions),(0,t.A)(o.gK.definitions))}),p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultCatalogResponses"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responsesCount"}},{kind:"Field",name:{kind:"Name",value:"threadedCatalogResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"defaultPagingOptions"}}},{kind:"Argument",name:{kind:"Name",value:"sortType"},value:{kind:"Variable",name:{kind:"Name",value:"sortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}},{kind:"Field",name:{kind:"Name",value:"to"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"posts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_post"}}]}}]}}]}}]}}].concat((0,t.A)(a.UZ.definitions),(0,t.A)(d.uS.definitions),(0,t.A)(o.gK.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebar_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebarContent_catalog"}}]}}].concat((0,t.A)(r.definitions))},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PagedThreadedCatalogResponsesQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogResponsesPagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"catalogId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"responsesCount"}},{kind:"Field",name:{kind:"Name",value:"responsesLocked"}},{kind:"Field",name:{kind:"Name",value:"threadedCatalogResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"catalogResponsesPagingOptions"}}},{kind:"Argument",name:{kind:"Name",value:"sortType"},value:{kind:"Variable",name:{kind:"Name",value:"sortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebar_threadedCatalogResponseConnection"}}]}}]}}]}}]}}].concat((0,t.A)(m.definitions))}},86444:(e,n,i)=>{i.r(n),i.d(n,{PostResponsesContent:()=>G});var t=i(80296),a=i(39181),o=i(96540),d=i(46225),s=i(91052),l=i(88726),r=i(2550),m=i(52290),p=i(28072),c=i(99731),k=i(56942),u=i(72130),v=i(49287),g=i(20239),S=i(42976),N=i(39160),y=i(65550),h=i(46879),f=i(74793),C=i(70694),R=i(44402),E=i(60603),T=i(80045),F=i(8389),b=i(86527),I=i(36557),x=i(85361),P=i(66274),D=i(43389),_=i(95087),A=i(79756),w=i(58192),B=["__typename"],V={paddingLeft:"24px"};function L(e){var n,i,t,d,s=e.post,l=e.threadDepth,r=e.parentEntity,p=(0,R.l)(),c=(0,u.$L)(),k=(0,v.jI)(),g=(0,o.useContext)(D.o),S=g.responseSortType,N=g.rootEntityId,y=(0,a.I)(x.X,{notifyOnNetworkStatusChange:!0,variables:{postId:s.id,sortType:S,paging:{limit:A.TC}}}),h=y.data,f=y.loading,C=y.fetchMore,E=null==h||null===(n=h.post)||void 0===n?void 0:n.threadedPostResponses,L=null!==(i=null==E?void 0:E.posts)&&void 0!==i?i:[],O=((null===(t=s.postResponses)||void 0===t?void 0:t.count)||0)-L.length,M=null==E||null===(d=E.pagingInfo)||void 0===d?void 0:d.next,j=(0,o.useCallback)((function(){if(M){M.__typename;var e=(0,T.A)(M,B);C({variables:{paging:e}})}}),[C,M]);return(0,o.useEffect)((function(){c.event("response.expanded",{postId:s.id,parentPostId:s.id,rootPostId:N,threadDepth:l,context:F.J.INLINE_POST_RESPONSE,source:k})}),[]),o.createElement(o.Fragment,null,o.createElement("div",{className:p([(0,_.C)(!1),V])},L.map((function(e,n){return o.createElement(Z,{key:e.id,response:e,parentEntity:r,threadDepth:l,omitBottomBorder:n===L.length-1,index:n,inResponseToEntityId:s.id})})),f&&o.createElement(P.V,null)),!f&&O>0&&o.createElement(m.a,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},o.createElement(I.kZ,{color:"ACCENT",scale:"M"},o.createElement(b.N,{linkStyle:"OBVIOUS",onClick:j},(0,w.s)(!1,O)))))}var O=i(3737),M=i(51772),j=i(60602),Q=i(88615),U=i(23406);function Z(e){var n,i=e.response,a=e.parentEntity,d=e.threadDepth,s=void 0===d?1:d,l=e.omitBottomBorder,r=e.index,p=e.inResponseToEntityId,c=(0,R.l)(),k=(0,E.e)(!1),u=(0,t.A)(k,4),g=u[0],S=u[1],N=u[3],y=(0,E.e)(!1),h=(0,t.A)(y,4),T=h[0],F=h[2],b=h[3],I=(0,o.useContext)(U.u),x=I.addContinueThisThreadSidebar,P=I.openSidebar,D=(0,o.useCallback)((function(){x(i,!0),window.requestAnimationFrame((function(){return P()}))}),[x,i,P]),w=(0,C.kb)(i),B=null===(n=i.creator)||void 0===n?void 0:n.name,V=B?"Replying to ".concat(B):void 0;return o.createElement(j.a.Provider,{value:{inResponseToEntityId:p,inResponseToEntityTypename:"Post",threadDepthFromRootEntity:s,threadDepthOnPage:s,isThreadedResponsesVisible:g,showThreadedResponses:S,toggleThreadedResponses:N,toggleCreateReply:b,hideCreateReply:F,loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1,showContinueThisThreadSidebar:D}},o.createElement(m.a,{borderBottom:l?void 0:"neutral.primary"},w?o.createElement(O.L,{responsePost:i,parentEntity:a,index:r,omitBottomBorder:!0}):o.createElement(M.N,{storyResponse:i,parentEntity:a,omitBottomBorder:!0}),T&&o.createElement("div",{className:c((0,_.C)(g,!0))},o.createElement(v.Ne,{source:{susiEntry:(0,A.gz)("Post")},extendSource:!0},o.createElement(f.jG,{localStorageId:"".concat(i.id,"-reply")},o.createElement(Q.Q,{parentEntityId:i.id,parentEntityTypename:"Post",hideReplyEditing:F,placeholder:V,showEditorHeader:!1})))),g&&o.createElement(L,{post:i,threadDepth:s+1,parentEntity:a})))}var H=i(47687),z=i(52798),K=i(16022),X=i(11211),$=i(21044),q=S.CD.TOP,J=3;function G(e){var n,i,f,C,R,E,T,F=e.post,b=(0,g.D)(),I=(0,u.$L)(),P=(0,v.jI)(),_=(0,N.d4)((function(e){return{isBot:e.client.viewerIsBot,authDomain:e.config.authDomain}})),A=_.isBot,w=_.authDomain,B=(0,r.A)().viewerId,V=(0,o.useContext)(U.u).openSidebar,L=(0,o.useState)(S.IZ.NOT_DISTRIBUTED),O=(0,t.A)(L,2),M=O[0],j=O[1],Q=F.id,G=(0,a.I)(x.X,{variables:{postId:Q,sortType:q,paging:{limit:J}},ssr:A}).data,W=(0,a.I)(s.i).data,Y=(0,$.J)(),ee=Y.hidePopoverMenu,ne=Y.handleClickOverflowDots,ie=Y.isPopoverMenuVisible,te=(0,H.S)(I,P,ee,Q),ae=(0,H.n)(ee,Q),oe=null!==(n=null===(i=F.postResponses)||void 0===i?void 0:i.count)&&void 0!==n?n:0,de=null!==(f=null==G||null===(C=G.post)||void 0===C||null===(R=C.threadedPostResponses)||void 0===R?void 0:R.posts)&&void 0!==f?f:[],se=B===(null===(E=F.creator)||void 0===E?void 0:E.id),le=null==F||null===(T=F.collection)||void 0===T?void 0:T.viewerEdge.isEditor,re=se||le,me=oe?"16px":"0",pe=(0,y.L)()?"-".concat(d.mW,"px"):"0";return o.createElement(D.o.Provider,{value:{setIsSavingResponse:function(){},responsesLocked:F.responsesLocked,editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){},setInResponseToQuote:function(){},responseDistribution:M,setResponseDistribution:j,responseSortType:q,rootEntityId:Q,rootEntityTypename:"Post",isResponsesSidebarVisible:!1}},o.createElement(m.a,{marginBottom:oe?{xs:"64px",sm:"64px",md:"88px",lg:"88px",xl:"88px"}:"54px"},o.createElement(l.i,{marginBottom:"64px",borderColor:b.colorTokens.border.neutral.primary.base}),o.createElement(p.P,{size:"app"},o.createElement(m.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},o.createElement(k.DZ,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},oe?o.createElement(o.Fragment,null,"Responses (",oe,")"):"No responses yet"),o.createElement(m.a,{display:"flex",gap:"18px"},o.createElement(z.I,null),re&&o.createElement(X.U,{responsesLocked:F.responsesLocked,infoLink:(0,h.C4)(w,Q),handleClickOverflowDots:ne,isPopoverMenuVisible:ie,hidePopoverMenu:ee,lockResponses:te,unlockResponses:ae,parentEntityTypename:"Post"}))),o.createElement(m.a,{margin:{xs:"32px ".concat(pe," ").concat(me),sm:"32px ".concat(pe," ").concat(me),md:"40px 0 ".concat(me),lg:"40px 0 ".concat(me),xl:"40px 0 ".concat(me)},paddingBottom:oe?"6px":void 0,borderBottom:oe?"neutral.primary":void 0},o.createElement(K.n,{parentEntityId:Q,parentEntityTypename:"Post",viewerPronouns:(null==W?void 0:W.viewer)||void 0,scrollIntoView:!1,autofocus:!1,showPublishCheckbox:!0})),de.map((function(e,n){return o.createElement(Z,{key:e.id,response:e,parentEntity:F,index:n,inResponseToEntityId:F.id})})),!F.responsesLocked&&de.length<oe&&o.createElement(m.a,{marginTop:"32px"},o.createElement(c.$n,{onClick:V,width:{xs:"100%",sm:"100%",md:"min-width",lg:"min-width",xl:"min-width"}},"See all responses")))))}},47687:(e,n,i)=>{i.d(n,{S:()=>d,n:()=>s});var t=i(80296),a=i(95420),o=i(79083),d=function(e,n,i,d){var s=(0,a.n)(o.OH,{variables:{postId:d},update:function(t){e.event("responses.locked",{postId:d,source:n}),l(t,d,!0,i)}});return(0,t.A)(s,1)[0]},s=function(e,n){var i=(0,a.n)(o.Rz,{variables:{postId:n},update:function(i){l(i,n,!1,e)}});return(0,t.A)(i,1)[0]},l=function(e,n,i,t){e.modify({id:e.identify({__typename:"Post",id:n}),fields:{responsesLocked:function(){return i}}}),t()}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/PostResponsesContent.f8aff1b9.chunk.js.map